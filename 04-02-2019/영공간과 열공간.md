
# 1. 행렬 벡터의 곱
matrix를 vetor를 이용해 곱셈을 해보자!

## Matrix ?
* m(rows) x n(columns)
* matrix $\times$ vector $\rightarrow$ vector: n차원일 때 가능

$ \mathbf{A} = \left[\begin{array}
{rrr}
a_{11} & a_{12} & ... & a_{1n} \\
a_{21} & a_{22} & ... & a_{2n} \\
...    & ...    & ... &    ... \\
a_{m1} & a_{m2} & ... & a_{mn}
\end{array}\right]
$
$ \vec X =
\left[\begin{array}
{rrr}
x_{1} \\
x_{2}  \\
\vdots\\
x_{n}
\end{array}\right]
$

### 1. $\mathbf A$와 $\vec X$와의 곱셈의 정의: 하나의 행에 대한 내적

$ \mathbf{A} \vec X = 
\left[\begin{array}
{rrr}
a_{11}x_{1} + a_{12}x_{2} + ... + a_{1n}x_{n} \\
a_{21}x_{1} + a_{22}x_{2} + ... + a_{2n}x_{n} \\
... \\
a_{m1}x_{1} + a_{m2}x_{2} + ... + a_{mn}x_{n} \\
\end{array}\right] = \vec b = \left[\begin{array}
{rrr}
b_{1} \\
b_{2} \\
\vdots   \\
b_{n} \\
\end{array}\right]
$

#### 숫자로 계산해보자!
$ 
\left[\begin{array}
{rrr}
-3 & 0 & 3  & 2 \\
1  & 7 & -1 & 9 \\
\end{array}\right]
\left[\begin{array}
{rrr}
2 \\
-3\\
4\\
-1\\
\end{array}\right]
= 
\left[\begin{array}
{rrr}
-3*2 + 0*-3 + 3*4 + 2*-1 \\
1*2 + 7*-1 + -1*4 + 9*-1 \\
\end{array}\right] 
=
\left[\begin{array}
{rrr}
4 \\
-32 \\
\end{array}\right]
$ 


```python
import numpy as np
```


```python
A = np.array([[-3, 0, 3, 2],
              [1, 7, -1, 9]])
X = np.array([[2],
              [-3],
              [4],
              [-1]])
np.dot(A, X)
```




    array([[  4],
           [-32]])



벡터를 여태까지는 column vector로 생각했지만, row vector로 생각할 수 있다.
#### row vector ? 전치(Transpose)
$ \vec a_{1} = \left[\begin{array}
{rrr}
-3 \\
0 \\
3\\
2\\
\end{array}\right]   \vec a_{2} = \left[\begin{array}
{rrr}
1 \\
7 \\
-1 \\
9\\
\end{array}\right]$   <br/> <br/>
$ a_{1}^{T} = \left[\begin{array}
{rrr}
-3 & 0 & 3 & 2
\end{array}\right]
a_{2}^{T} = \left[\begin{array}
{rrr}
1 & 7 & -1 & 9
\end{array}\right]$
<br />
<br />
$
\left[\begin{array}
{rrr}
\vec a_{1}^{T} \\
\vec a_{2}^{T} \\
\end{array}\right] \vec x = \left[\begin{array}
{rrr}
\vec a_{1}\cdot\vec x \\
\vec a_{2}\cdot\vec x \\
\end{array}\right]
$


```python
a1 = np.array([[-3],
              [0],
              [3],
              [2]])
a2 = np.array([[1],
              [7],
              [-1],
              [9]])

np.sum(a1*X), np.sum(a2*X)
```




    (4, -32)



### 2.  가중치 결합 $ \rightarrow$ matrix A의 열벡터들의 선형 조합
$ \mathbf A = \left[\begin{array}
{rrr}
3 & 1 & 0 & 3 \\
2  & 4 & 7 & 0 \\
-1 & 2& 3& 4 \\
\end{array}\right] \vec x = \left[\begin{array}
{rrr}
x_{1}\\
x_{2}\\
x_{3}\\
x_{4}\\
\end{array}\right] 
\vec v_{1} = \left[\begin{array}
{rrr}
3\\
2\\
-1\\
\end{array}\right] 
\vec v_{2} = \left[\begin{array}
{rrr}
1\\
4\\
2\\
\end{array}\right]
\vec v_{3} = \left[\begin{array}
{rrr}
0\\
7\\
3\\
\end{array}\right]
\vec v_{4} = \left[\begin{array}
{rrr}
3\\
0\\
4\\
\end{array}\right] $
<br /><br />
$\mathbf A = \left[\begin{array}
{rrr}
\vec v_{1} & \vec v_{2} & \vec v_{3} & \vec v_{4}
\end{array}\right] $
<br /> <br />
$\mathbf A \vec x = \left[\begin{array}
{rrr}
3x_{1} + 1x_{2} + 0x_{3} + 3x_{4} \\
2x_{1} + 4x_{2} + 7x_{3} + 0x_{4} \\
-1x_{1} + 2x_{2} + 3x_{3} + 4x_{4}
\end{array}\right] $

$\vec v_{1}$는 $x_{1}$<br />
$\vec v_{2}$는 $x_{2}$<br />
$\vec v_{3}$는 $x_{3}$<br />
$\vec v_{4}$는 $x_{4}$과 곱해지는 것을 알 수 있다.
<br /> <br />
$$\mathbf A \vec x = x_{1}\vec v{1} + x_{2}\vec v{2} + x_{3}\vec v{3} + 
x_{4}\vec v{4}$$ <br />
따라서, matrix A의 열벡터들의 선형 조합이라고 할 수 있다.

# 2. 행렬의 영공간이란?
#### 부분공간, subspace S 조건
1. $ \vec 0 \in S $
2. $ \vec v_{1}, \vec v_{2} \in S \Rightarrow \vec v_{1} + \vec v_{2} \in S $
3. $ c \in R \quad \vec v_{1} \in S \quad  c\vec v_{1} \in S $

#### $\mathbf A : m \times n $
* 동차방정식 세우기($\vec 0$ 이 존재하면 homogenous)<br /> 
$$ \mathbf A \vec x = \vec 0 $$
* 부분공간은 유효한가? <br />
$ N = \{ \vec x \in \mathbf R^n | \mathbf A \vec x = \vec 0 \} $

### step 1) 영벡터가 존재하는가? YES, $\vec 0 \in N $
임의의 $ m \times x $ 행렬인 $\mathbf A $ 와 영벡터를 곱하면 어떻게 되는가?

$ \mathbf{A} \vec 0 = 
\left[\begin{array}
{rrr}
a_{11}x_{1} + a_{12}x_{2} + ... + a_{1n}x_{n} \\
a_{21}x_{1} + a_{22}x_{2} + ... + a_{2n}x_{n} \\
... \\
a_{m1}x_{1} + a_{m2}x_{2} + ... + a_{mn}x_{n} \\
\end{array}\right] \left[\begin{array}
{rrr}
0 \\
0 \\
\vdots \\
0\\
\end{array}\right] = \left[\begin{array}
{rrr}
0 \\
0 \\
\vdots \\
0\\
\end{array}\right]$ 

### step 2) $\vec v_{1}, \vec v_{2} \in N $, 두 벡터가 모두 방정식을 만족하는 가? YES
#### 덧셈에 대하여 닫혀 있는 지 살펴 보면 됨!
$\vec v_{1}, \vec v_{2} \in N \Rightarrow \mathbf A \vec v_{1} =\vec 0$
<br/>
$\qquad\qquad\quad\,\,\,\,\, \mathbf A \vec v_{2} =\vec 0$ <br />
* 덧셈에 대하여 닫혀 있으려면, 
$ \mathbf A(\vec v_{1} + \vec v_{2}) = \mathbf A \vec v_{1} + \mathbf A \vec v_{2}= \vec 0 $ <br />

### step 3) 곱셈에 닫혀 있는가? YES, $ c \vec v_{1} \in N ? $
#### $\mathbf A(c\vec v_{1}) = c\mathbf A \vec v_{1} = c\vec 0 = \vec 0 $

### Null space of A, N = N(A)

## 영공간 2: 행렬의 영공간 계산하기
#### 영공간: 어떤 벡터의 집합, 행렬 A와 안에 있는 어떤 벡터와 곱해도 0이 되어야 한다
$ \mathbf{A} = 
\left[\begin{array}
{rrr}
1 & 1 & 1 & 1 \\
1 & 2 & 3 & 4 \\
4 & 3 & 2 & 1 \\
\end{array}\right] \vec x \in \mathbf R^{4} =  \left[\begin{array}
{rrr}
x_{1}\\
x_{2}\\
x_{3}\\
x_{4}\\
\end{array}\right]$ <br />$\mathbf A \vec x= \left[\begin{array}
{rrr}
0\\
0\\
0\\
\end{array}\right]  $
다음 조건을 만족하는 $\vec x $ 구하기
#### $ N(A) = \{ \vec x \in \mathbf R^{4} | \mathbf A \vec x = \vec 0 \} $ 

### 다음 식을 만족하는 해를 구하면 끝
기약행사다리꼴로 풀어 봅니다. <br />
$ x_{1} + x_{2} + x_{3} + x_{4} = 0 $ <br/>
$ x_{1} + 2x_{2} + 3x_{3} + 4x_{4} = 0 $ <br/>
$ 4x_{1} + 3x_{2} + 2x_{3} + 1x_{4} = 0 $ <br/>

$ \left[\begin{array}
{rrr}
1 & 1 & 1 & 1 | 0 \\
1 & 2 & 3 & 4 | 0 \\
4 & 3 & 2 & 1 | 0 \\
\end{array}\right]  \rightarrow \left[\begin{array}
{rrr}
1 & 1 & 1 & 1 | 0 \\
0 & 1 & 2 & 3 | 0 \\
0 & 1 & 2 & 3 | 0 \\
\end{array}\right]  \rightarrow \left[\begin{array}
{rrr}
1 & 0 & -1 & -2 | 0 \\
0 & 1 & 2 & 3 | 0 \\
0 & 0 & 0 & 0 | 0 \\
\end{array}\right] $ 
<br />
$ \Rightarrow x_{1} - x_{3} - x_{4} = 0 \qquad x_{1} = x_{3} + 2x_{4}$ <br/> $\quad x_{2} + 2x_{3}+ 3x_{4} = 0 \quad\, x_{2} = -2x_{3} -3x_{4}$ <br />
$ \left[\begin{array}
{rrr}
x_{1}\\
x_{2}\\
x_{3}\\
x_{4}\\
\end{array}\right] = x_{3}\left[\begin{array}
{rrr}
1 \\
-2\\
1\\
0\\
\end{array}\right] + x_{4}\left[\begin{array}
{rrr}
2 \\
-3\\
0\\
1\\
\end{array}\right] $

### $\mathbf A \vec x = 0 $는 두 열벡터의 일차 결합이다.

$x_{3}, x_{4}$는 어떤 실수가 와도 괜찮음 $x_{3} \in \mathbf R , x_{4} \in \mathbf R $, 
이 두 열벡터의 일차 결합(span)으로 나타낼 수 있다.
$ N(A) = span(\left[\begin{array}
{rrr}
1 \\
-2\\
1\\
0\\
\end{array}\right] \left[\begin{array}
{rrr}
2 \\
-3\\
0\\
1\\
\end{array}\right] )$
### $(rref(A))\vec x = 0$, 즉 $\mathbf Ax = 0 $ 의 해를 구하는 것
 *  N(A) = N(rref(A))

## 영공간 3: 선형 독립과의 관계
A의 열벡터의 선형독립을 A의 영공간과 연관짓기
? 열벡터란? m차원의 벡터
$ \mathbf{A} = 
\left[\begin{array}
{rrr}
a_{11} + a_{12} + ... + a_{1n} \\
a_{21} + a_{22} + ... + a_{2n} \\
... \\
a_{m1} + a_{m2} + ... + a_{mn} \\
\end{array}\right] $의 $ m \times n$ 행렬이 있을때
각 열을  $\vec V{1} ... \vec V_{n}$ 으로 생각하면,

$ \mathbf{A} = 
\left[\begin{array}
{rrr}
\vec V_{1} & \vec V_{2} & ... & \vec V_{n} \\
\end{array}\right] $
<br />
#### $ \mathbf N(\mathbf A) = \{ \vec X \in \mathbf R^{n} |\, \mathbf A \vec X = \vec 0 \} $
(다음을 만족하려면, $ \mathbf A$는 $m\times n$ 이여야 하고, $\vec X$ 는 $n\times 1$ 이여야함)
따라서, 
$ \mathbf{A} = 
\left[\begin{array}
{rrr}
\vec V_{1} & \vec V_{2} & ... & \vec V_{n} \\
\end{array}\right]
\left[\begin{array}
{rrr}
x_{1} \\
x_{2}  \\
\vdots\\
x_{n}
\end{array}\right]  =
\left[\begin{array}
{rrr}
0 \\
0  \\
\vdots\\
0
\end{array}\right]
$ (m개)

#### $ x_{1}\vec V_{1} + x_{2}\vec V_{2} + ... + x_{n}\vec V_{n} = \vec 0 $ <br />
$ \vec V_{1}, \vec V_{n}$ 의 가중치들이 모두 0일 경우일때 우리는 선형 독립이라고 했었지요

* $\vec V_{1}, \vec V_{2}, ... \vec V_{n}$ Liner Independent $\Leftrightarrow$ only solution is  $ x_{1}, x_{2}, ... x_{n} = 0  \Leftrightarrow N(\mathbf A) = \{\vec 0\}$

벡터들의 선형결합으로 표현되었는데, 이 선형결합이 0과 같으려면,$ x_{1}, x_{2}$이 모두 0일 경우밖에 없다는것, 모두 0이라는 것은 $ N(\mathbf A) = \{ \vec 0 \}$
(only contain $\vec 0$) 어떤 매트릭스의 영공간이 $\vec 0$를 포함한다면 그 매트릭스의 열이 선형 독립하다는 것임

# 3. 행렬의 열공간 column Space, $\mathbf A \vec x$가 다질수있는 모든 집합
$ \mathbf{A} ( m \times n) = 
\left[\begin{array}
{rrr}
\vec V_{1} & \vec V_{2} & ... & \vec V_{n} \\
\end{array}\right] $

$ \vec V_{1}, \vec V_{2}, ... \vec V_{n} \in \mathbf R^{m} $ 

$C(\mathbf A)= span(\vec V_{1}, \vec V_{2}, ... \vec V_{n})$
#### 곱셈 후에도 닫혀 있는가? 
$ \vec a \in C(\mathbf A) $<br/>
$\quad \vec a = c_{1}\vec V_{1} + c_{2}\vec V_{2}+...+ c_{n}\vec V_{n} $ <br/>

$s\vec a = sc_{1}\vec V_{1}+ sc_{2}\vec V_{2}...+ sc_{n}\vec V_{n} $ <br />

$ \vec b \in C(\mathbf A)$ <br/>
$\quad \vec b = b_{1}\vec V_{1} + b_{2}\vec V_{2} + ... + b_{n}\vec V_{n} $ <br/>
#### $ \vec a + \vec b \in C(\mathbf A)$ ?
$ (c_{1} + b_{1})\vec V_{1} + (c_{2} + b_{2})\vec V_{2} + ... + (c_{n} + b_{n})\vec V_{n}$ 선형 결합이므로  성립

따라서,
$ C(\mathbf A) \Rightarrow $ valid subspace 

$  \{\mathbf A\vec x | \vec x \in \mathbf R^n \} $ <br />
$\mathbf A \vec x = x_{1}\vec V_{1} +  x_{2}\vec V_{2} + ... +  x_{ }\vec V_{n} $

#### $ \mathbf A\vec x $ 를 $ \{x_{1}\vec V_{1} +  x_{2}\vec V_{2} + ... +  x_{n}\vec V_{n} | x_{1}, x_{2}, ... x_{n} \in \mathbf R \}  = span (\vec V_{1}, \vec V_{2}, .. \vec V_{n})$

#### 다음 식을 풀어 봅시다!
$ \mathbf A \vec x = \vec b_{1} $ <br />
$\vec b_{1} not \in C(\mathbf A) \Rightarrow \mathbf A\vec x = \vec b_{1}$ has no solution <br />
$ \mathbf A \vec x = \vec b_{2} $  has at least 1 solution $ \Rightarrow \vec b_{2} \in C(\mathbf A)$ <br />


### 열공간이란?
#### 열벡터의 모든 선형결합이며, $\mathbf A \vec x$ 가 가질 수있는 모든 값 
따라서, 어떤  $\mathbf A \vec x $가 값이 없다고 하면 해가 당연히 존재 하지 않고 해가 존재한다면 값을 만족시킬 수 있는  $\mathbf A \vec x$를 구할 수 있다.

# 영공간과 열공간의 기저
선형 일차 독립

$ \mathbf{A} = 
\left[\begin{array}
{rrr}
1 & 1 & 1 & 1 \\
2 & 1 & 4 & 3 \\
3 & 4 & 1 & 2 \\
\end{array}\right] $

$ C(\mathbf A)= span (\left[\begin{array}
{rrr}
1 \\
2 \\
3 \\
\end{array}\right]\left[\begin{array}
{rrr}
1 \\
1 \\
4 \\
\end{array}\right]\left[\begin{array}
{rrr}
1 \\
4 \\
1 \\
\end{array}\right]\left[\begin{array}
{rrr}
1 \\
3 \\
2 \\
\end{array}\right]) 
$

#### $\mathbf A$의 영공간이 $\vec 0$를 가진다면, 선형독립성을 갖는다.
$N(\mathbf A) = N(rref(\mathbf A)) $

$ \mathbf{A} = 
\left[\begin{array}
{rrr}
1 & 1 & 1 & 1 \\
2 & 1 & 4 & 3 \\
3 & 4 & 1 & 2 \\
\end{array}\right] \rightarrow \left[\begin{array}
{rrr}
1 & 1 & 1 & 1 \\
0 & 1 & -2 & -1 \\
0 & 1 & -2 & -1 \\
\end{array}\right] \rightarrow \left[\begin{array}
{rrr}
1 & 0 & 3 & 2 \\
0 & 1 & -2 & -1 \\
0 & 0 & 0 & 0 \\
\end{array}\right]$

$ rref(\mathbf A)  = \left[\begin{array}
{rrr}
1 & 0 & 3 & 2 \\
0 & 1 & -2 & -1 \\
0 & 0 & 0 & 0 \\
\end{array}\right]\left[\begin{array}
{rrr}
x_{1}\\
x_{2}\\
x_{3}\\
x_{4}\\
\end{array}\right] = \left[\begin{array}
{rrr}
0\\
0\\
0\\
\end{array}\right] $ <br />
$ x_{1} + 3x_{3} + 2x_{4} = 0 $ <br />
$ x_{2} - 2x_{3} - 1x_{4} = 0 $ <br />
<br />
<br />
$ x_{1} = -3x_{3} - 2x_{4}$ <br />
$ x_{2} = 2x_{3} + x_{4}$ <br />
$ N(\mathbf A) = N(rref(\mathbf A)) = \left[\begin{array}
{rrr}
x_{1}\\
x_{2}\\
x_{3}\\
x_{4}\\
\end{array}\right] = x_{3}\left[\begin{array}
{rrr}
-3 \\
2\\
1\\
0\\
\end{array}\right]+x_{4} \left[\begin{array}
{rrr}
-2\\
1\\
0\\
1\\
\end{array}\right] = span(\left[\begin{array}
{rrr}
-3\\
2\\
1\\
0\\
\end{array}\right]\left[\begin{array}
{rrr}
-2\\
1\\
0\\
1\\
\end{array}\right])$

$ \left[\begin{array}
{rrr}
1\\
2\\
3\\
\end{array}\right]\left[\begin{array}
{rrr}
1\\
1 \\
4 \\
\end{array}\right]\left[\begin{array}
{rrr}
1\\
4\\
1\\
\end{array}\right] 
\left[\begin{array}
{rrr}
1\\
3\\
2\\
\end{array}\right]$ 선형 독립인가??? NO, (only solution = $ \vec 0 $)


### 기저? 
부분공간을 생성하는 벡터의 집합, 또한 선형독립성을 지님 $\rightarrow$ span이지만 기저는 아님.

따라서 중복을 제거하면 되는데, 어떻게 하면 될까요 :)?

$ x_{1}\left[\begin{array}
{rrr}
1\\
2\\
3\\
\end{array}\right] + x_{2}\left[\begin{array}
{rrr}
1\\
1\\
4\\
\end{array}\right] + x_{3}\left[\begin{array}
{rrr}
1\\
4\\
1\\
\end{array}\right] + x_{4}\left[\begin{array}
{rrr}
1\\
3\\
2\\
\end{array}\right] = 0 $

* $ x_{3} = 0, x_{4} = -1$ <br /><br />
$ x_{1}\left[\begin{array}
{rrr}
1\\
2\\
3\\
\end{array}\right] + x_{2}\left[\begin{array}
{rrr}
1\\
1\\
4\\
\end{array}\right] = 1 \left[\begin{array}
{rrr}
1\\
3\\
2\\
\end{array}\right]$ <br /> <br />
$ x_{1} = -3x_{3} - 2x_{4}$ <br />
$ x_{2} = 2x_{3} + x_{4}$ <br />
* $ x_{3} = 0, x_{4} = -1 \Rightarrow x_{1} = 2 x_{2} = -1 $ <br /> <br />
$ 2\left[\begin{array}
{rrr}
1\\
2\\
3\\
\end{array}\right] -1 \left[\begin{array}
{rrr}
1\\
1\\
4\\
\end{array}\right] = 1 \left[\begin{array}
{rrr}
1\\
3\\
2\\
\end{array}\right] $
#### $ x_{3}$ 는 $x_{1}, x_{2}$로 만들 수 있기 때문에 제거 $ x_{4}$ 마찬 가지이므로 제거
### 기저는? 
$ C(\mathbf A) = span(\vec V_{1}, \vec V_{2})$ <br />
$\qquad =span(\left[\begin{array}
{rrr}
1\\
2\\
3\\
\end{array}\right]\left[\begin{array}
{rrr}
1\\
1\\
4\\
\end{array}\right] )$

둘은 선형 독립인가에 대해서는...
C를 곱하면 됨
$ C\left[\begin{array}
{rrr}
1\\
2\\
3\\
\end{array}\right]= \left[\begin{array}
{rrr}
1C\\
2C\\
3C\\
\end{array}\right]= \left[\begin{array}
{rrr}
1\\
1\\
4\\
\end{array}\right]$ <br />
$ C = 1, C = 1/2 다름 $
